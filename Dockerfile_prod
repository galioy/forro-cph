FROM node:10.9.0

WORKDIR /app

ADD app /app

ARG DATABASE_URL
ENV DATABASE_URL=$DATABASE_URL

ARG PG_APP_USERNAME
ENV PG_APP_USERNAME=$PG_APP_USERNAME

ARG PG_APP_PASSWORD
ENV PG_APP_PASSWORD=$PG_APP_PASSWORD

ARG PG_HOST
ENV PG_HOST=$PG_HOST

ARG PG_DBNAME
ENV PG_DBNAME=$PG_DBNAME

ARG LOGDNA_KEY
ENV LOGDNA_KEY=$LOGDNA_KEY

ARG AUTH_SECRET
ENV AUTH_SECRET=$AUTH_SECRET

ARG FIREBASE_API_KEY
ENV FIREBASE_API_KEY=$FIREBASE_API_KEY

ARG FIREBASE_AUTH_DOMAIN
ENV FIREBASE_AUTH_DOMAIN=$FIREBASE_AUTH_DOMAIN

ARG FIREBASE_DATABASE_URL
ENV FIREBASE_DATABASE_URL=$FIREBASE_DATABASE_URL

ARG FIREBASE_PROJECT_ID
ENV FIREBASE_PROJECT_ID=$FIREBASE_PROJECT_ID

ARG FIREBASE_STORAGE_BUCKET
ENV FIREBASE_STORAGE_BUCKET=$FIREBASE_STORAGE_BUCKET

ARG FIREBASE_MESSAGING_SENDER_ID
ENV FIREBASE_MESSAGING_SENDER_ID=$FIREBASE_MESSAGING_SENDER_ID

ARG REDIS_URL
ENV REDIS_URL=$REDIS_URL

ENV NODE_ENV=production

CMD ["node", "src/app.js"]
